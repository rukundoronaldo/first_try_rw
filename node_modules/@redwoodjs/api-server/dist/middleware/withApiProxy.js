"use strict";

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.default = void 0;

var _httpProxyMiddleware = require("http-proxy-middleware");

const withApiProxy = (app, {
  apiProxyPath,
  apiHost
}) => {
  // If apiHost is supplied, it means the functions are running elsewhere
  // So we should just proxy requests
  if (apiHost) {
    app.use((0, _httpProxyMiddleware.createProxyMiddleware)(apiProxyPath, {
      changeOrigin: true,
      pathRewrite: {
        [`^${apiProxyPath}`]: '/' // remove base path

      },
      target: apiHost
    }));
  }

  return app;
};

var _default = withApiProxy;
exports.default = _default;